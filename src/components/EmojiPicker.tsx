
import React, { useState } from 'react';
import { X, Search } from 'lucide-react';
import { Button } from './ui/button';
import { Input } from './ui/input';

// Common emojis - can be expanded
const commonEmojis = [
  'ðŸ˜€', 'ðŸ˜ƒ', 'ðŸ˜„', 'ðŸ˜', 'ðŸ˜†', 'ðŸ˜…', 'ðŸ˜‚', 'ðŸ¤£', 'ðŸ˜Š', 'ðŸ˜‡',
  'ðŸ™‚', 'ðŸ™ƒ', 'ðŸ˜‰', 'ðŸ˜Œ', 'ðŸ˜', 'ðŸ¥°', 'ðŸ˜˜', 'ðŸ˜—', 'ðŸ˜™', 'ðŸ˜š',
  'ðŸ˜‹', 'ðŸ˜›', 'ðŸ˜', 'ðŸ˜œ', 'ðŸ¤ª', 'ðŸ¤¨', 'ðŸ§', 'ðŸ¤“', 'ðŸ˜Ž', 'ðŸ¤©',
  'ðŸ˜', 'ðŸ˜’', 'ðŸ˜ž', 'ðŸ˜”', 'ðŸ˜Ÿ', 'ðŸ˜•', 'ðŸ™', 'â˜¹ï¸', 'ðŸ˜£', 'ðŸ˜–',
  'ðŸ˜«', 'ðŸ˜©', 'ðŸ¥º', 'ðŸ˜¢', 'ðŸ˜­', 'ðŸ˜¤', 'ðŸ˜ ', 'ðŸ˜¡', 'ðŸ¤¬', 'ðŸ¤¯',
  'ðŸ˜³', 'ðŸ¥µ', 'ðŸ¥¶', 'ðŸ˜±', 'ðŸ˜¨', 'ðŸ˜°', 'ðŸ˜¥', 'ðŸ˜“', 'ðŸ¤—', 'ðŸ¤”',
  'ðŸ¤­', 'ðŸ¤«', 'ðŸ¤¥', 'ðŸ˜¶', 'ðŸ˜¶â€ðŸŒ«ï¸', 'ðŸ˜', 'ðŸ˜‘', 'ðŸ˜¬', 'ðŸ™„', 'ðŸ˜¯',
  'ðŸ˜¦', 'ðŸ˜§', 'ðŸ˜®', 'ðŸ˜²', 'ðŸ¥±', 'ðŸ˜´', 'ðŸ¤¤', 'ðŸ˜ª', 'ðŸ˜µ', 'ðŸ¤',
  'ðŸ¥´', 'ðŸ¤¢', 'ðŸ¤®', 'ðŸ¤§', 'ðŸ˜·', 'ðŸ¤’', 'ðŸ¤•', 'ðŸ¤‘', 'ðŸ¤ ', 'ðŸ‘',
  'ðŸ‘Ž', 'ðŸ‘', 'ðŸ™Œ', 'ðŸ‘', 'ðŸ¤²', 'ðŸ¤', 'ðŸ™', 'âœŒï¸', 'ðŸ¤Ÿ', 'ðŸ¤˜'
];

// Categories for emojis
const emojiCategories = {
  "Smileys & People": ['ðŸ˜€', 'ðŸ˜ƒ', 'ðŸ˜„', 'ðŸ˜', 'ðŸ˜†', 'ðŸ˜…', 'ðŸ˜‚', 'ðŸ¤£', 'ðŸ˜Š', 'ðŸ˜‡', 'ðŸ‘¦', 'ðŸ‘§', 'ðŸ‘¨', 'ðŸ‘©'],
  "Animals & Nature": ['ðŸ¶', 'ðŸ±', 'ðŸ­', 'ðŸ¹', 'ðŸ°', 'ðŸ¦Š', 'ðŸ»', 'ðŸ¼', 'ðŸŒ±', 'ðŸŒ²', 'ðŸŒ³', 'ðŸŒ´', 'ðŸŒµ', 'ðŸŒ¿'],
  "Food & Drink": ['ðŸŽ', 'ðŸ', 'ðŸŠ', 'ðŸ‹', 'ðŸŒ', 'ðŸ‰', 'ðŸ‡', 'ðŸ“', 'ðŸ’', 'ðŸ‘', 'ðŸ¥', 'ðŸž', 'ðŸ¥–', 'ðŸ¥¨'],
  "Activities": ['âš½', 'ðŸ€', 'ðŸˆ', 'âš¾', 'ðŸ¥Ž', 'ðŸ', 'ðŸ‰', 'ðŸŽ±', 'ðŸŽ®', 'ðŸŽ²', 'ðŸ§©', 'ðŸŽ­', 'ðŸŽ¨', 'ðŸŽ¤'],
  "Travel & Places": ['ðŸš—', 'ðŸš•', 'ðŸš™', 'ðŸšŒ', 'ðŸšŽ', 'ðŸŽï¸', 'ðŸš“', 'ðŸš‘', 'âœˆï¸', 'ðŸš€', 'ðŸŒ', 'ðŸŒŽ', 'ðŸŒ', 'ðŸŒ‹'],
  "Objects": ['âŒš', 'ðŸ“±', 'ðŸ’»', 'âŒ¨ï¸', 'ðŸ–¥ï¸', 'ðŸ–¨ï¸', 'ðŸ–±ï¸', 'ðŸ–²ï¸', 'ðŸ’¡', 'ðŸ”¦', 'ðŸ§°', 'ðŸ”§', 'ðŸ”¨', 'ðŸª“'],
  "Symbols": ['â¤ï¸', 'ðŸ§¡', 'ðŸ’›', 'ðŸ’š', 'ðŸ’™', 'ðŸ’œ', 'ðŸ–¤', 'â£ï¸', 'ðŸ’•', 'ðŸ’ž', 'ðŸ’', 'ðŸ”´', 'ðŸŸ ', 'ðŸŸ¡'],
  "Flags": ['ðŸ', 'ðŸš©', 'ðŸŽŒ', 'ðŸ´', 'ðŸ³ï¸', 'ðŸ³ï¸â€ðŸŒˆ', 'ðŸ³ï¸â€âš§ï¸', 'ðŸ´â€â˜ ï¸', 'ðŸ‡ºðŸ‡³', 'ðŸ‡¦ðŸ‡«', 'ðŸ‡¦ðŸ‡½', 'ðŸ‡¦ðŸ‡±', 'ðŸ‡©ðŸ‡¿', 'ðŸ‡¦ðŸ‡¸']
};

interface EmojiPickerProps {
  onSelectEmoji: (emoji: string) => void;
  onClose: () => void;
}

const EmojiPicker: React.FC<EmojiPickerProps> = ({ onSelectEmoji, onClose }) => {
  const [searchQuery, setSearchQuery] = useState('');
  const [activeCategory, setActiveCategory] = useState<string | null>(null);
  
  const filteredEmojis = searchQuery 
    ? commonEmojis.filter(emoji => emoji.includes(searchQuery))
    : activeCategory 
      ? emojiCategories[activeCategory as keyof typeof emojiCategories] 
      : commonEmojis;

  return (
    <div className="p-2 bg-background border rounded-lg shadow-lg w-full max-w-xs">
      <div className="flex justify-between items-center mb-2">
        <h3 className="text-sm font-medium">Select Emoji</h3>
        <Button variant="ghost" size="sm" onClick={onClose} className="h-6 w-6 p-0">
          <X className="h-4 w-4" />
        </Button>
      </div>
      
      <div className="mb-2 relative">
        <Input
          type="text"
          placeholder="Search emojis..."
          value={searchQuery}
          onChange={(e) => setSearchQuery(e.target.value)}
          className="pl-8 h-8 text-sm"
        />
        <Search className="absolute left-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground" />
      </div>
      
      {!searchQuery && (
        <div className="flex flex-wrap gap-1 mb-2">
          {Object.keys(emojiCategories).map(category => (
            <Button
              key={category}
              variant={activeCategory === category ? "default" : "outline"}
              size="sm"
              className="text-xs py-1 h-7"
              onClick={() => setActiveCategory(prev => prev === category ? null : category)}
            >
              {category}
            </Button>
          ))}
        </div>
      )}
      
      <div className="grid grid-cols-6 gap-1 overflow-y-auto max-h-[200px]">
        {filteredEmojis.map((emoji, index) => (
          <button
            key={index}
            onClick={() => onSelectEmoji(emoji)}
            className="text-xl p-1 hover:bg-secondary rounded cursor-pointer"
          >
            {emoji}
          </button>
        ))}
      </div>
    </div>
  );
};

export default EmojiPicker;
